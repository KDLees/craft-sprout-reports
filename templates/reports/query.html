{% extends "reports/_inc/boilerplate" %}

{% set selectedTab = 'newquery' %}

{% set content %}

{% import "_includes/forms" as forms %}
{% if queryText is not defined %}{% set queryText = null %}{% endif %}
{% if myEntries is not defined %}{% set myEntries = null %}{% endif %}
{% if tableCols is not defined %}{% set tableCols = null %}{% endif %}

<form method="post" action="" accept-charset="UTF-8">
        <input type="hidden" name="action" value="reports/reports/createQuery" />
        {{ forms.textAreaField({
            label: 'Query'|t,
            required: true,
            name: 'queryText',
            value: queryText ? queryText : null,
            errors: null,
        }) }}

        <div class="buttons">
            <input type="submit" class="btn submit" value="{{ 'Run Query'|t }}">
            <label style="display: inline-block; width: auto; margin-left: 1em;"><input type="checkbox" name="exportData" value="Y" /> Export as CSV?</label>
        </div>
    </form>

<div class="tableview">
    <table class="data">
        <thead>
            <tr>
        {% for item in tableCols %}
        <th>{{ item }}</th>
        {% endfor %}
    </tr>
</thead>
<tbody>
        {% for item in myEntries %}
        {% for row in myEntries %}
        <tr>
            {% for keyname in tableCols %}
                <td>{{ row[keyname] }}</td>
            {% endfor %}
        </tr>
        {% endfor %}
        {% endfor %}
    </table>
</div>
{% endset %}
