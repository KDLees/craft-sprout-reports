{% extends "craftdiscover/_inc/boilerplate" %}

{% set selectedTab = 'element' %}

{% set content %}

{% import "_includes/forms" as forms %}
{% if myEntries is not defined %}{% set myEntries = null %}{% endif %}
{% if tableCols is not defined %}{% set tableCols = null %}{% endif %}

<form method="post" action="" accept-charset="UTF-8">
        <input type="hidden" name="action" value="craftDiscover/reports/createQuery" />


        <select name="sectionName">
            <option value="">Select a Section</option>
            {% for key, sname in craft.craftdiscover.allSections()  %}
                <option value="{{ sname.id }}">{{ sname.name }}</option>
            {% endfor %}
        </select>
<hr />
        <select name="combination[]">
            <option value="">select a Combinator</option>
            <option>AND</option>
            <option>OR</option>
            <option>NOT</option>
        </select>

        <select name="fieldname[]">
            <option value="">Select a Field</option>
            {% for key, sname in craft.craftdiscover.allFields()  %}
                <option value="{{ key }}">{{ sname }}</option>
            {% endfor %}
        </select>

        <select name="operation[]">
            <option value="">Select a Comparison</option>
            <option value="=">EQUALS</option>
            <option value="like">CONTAINS</option>
            <option value="&gt;">GREATER THAN</option>
            <option value="&gt;=">GREATER THAN OR EQUALS</option>
            <option value="&lt;">LESS THAN</option>
            <option value="&lt;=">LESS THAN OR EQUALS</option>
        </select>

        <input type="text" value="" name="comparevalue[]" />

        <hr />
        <fieldset>
        <select name="combination[]">
            <option value="">select a Combinator</option>
            <option>AND</option>
            <option>OR</option>
            <option>NOT</option>
        </select>

        <select name="fieldname[]">
            <option value="">Select a Field</option>
            {% for key, sname in craft.craftdiscover.allFields()  %}
                <option value="{{ key }}">{{ sname }}</option>
            {% endfor %}
        </select>

        <select name="operation[]">
            <option value="">Select a Comparison</option>
            <option>EQUALS</option>
            <option>CONTAINS</option>
            <option>GREATER THAN</option>
            <option>GREATER THAN OR EQUALS</option>
            <option>LESS THAN</option>
            <option>LESS THAN OR EQUALS</option>
        </select>

        <input type="text" value="" name="comparevalue[]" />
    </fieldset>

<hr />
        <div class="buttons">
            <input type="submit" class="btn submit" name="show" value="{{ 'Display Data'|t }}">
            <label style="display: inline-block; width: auto; margin-left: 1em;"><input type="checkbox" name="exportData" value="Y" /> Export as CSV?</label>
        </div>
    </form>

<hr />
<div class="tableview">
    <table class="data">
        <thead>
            <tr>
        {% for item in tableCols %}
        <th>{{ item }}</th>
        {% endfor %}
    </tr>
</thead>
<tbody>
        {% for item in myEntries %}
        <tr>
            {% for keyname in tableCols %}
                <td>{{ item[keyname] }}</td>
            {% endfor %}
        </tr>
        {% endfor %}
    </table>
</div>
{% endset %}
